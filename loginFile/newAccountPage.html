<!DOCTYPE html>
<html>
<head>
	<!-- Set the viewport to control the page's dimensions and scaling on different devices -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>New account</title>
	<!-- Link the external CSS file -->
    <link rel="stylesheet" type="text/css" href="/cssNewAccountPage.css">
	<link rel="stylesheet" type="text/css" href="/cssTheme.css">
</head>
<body>
	<!-- button for changing the theme -->
	<button id="toggle-theme">Toggle Theme</button>
	<!-- Create a container to hold the login form -->
	<div class="container">
		<!-- Add a heading for the login page -->
		<h1>Create new user</h1>
		<!-- Create the login form with inputs for the username, password, and a submit button -->
		<form>
			<div>
				<!-- Username input -->
				<label for="username">Username:</label>
				<input type="text" id="username" name="username" required>
				
				<!-- Password input -->
				<label for="password">Password:</label>
				<input type="password" id="password" name="password" required>

				<!-- Confirm password input -->
				<label for="confirm-password">Confirm Password:</label>
				<input type="password" id="confirm-password" name="confirm-password" required>

				<!-- Change the submit input to a button element -->
				<button type="submit" class="button" onclick="handleSubmit()">Register</button>
			</div>
		</form>
		<footer>
            <div>
                <button type="button" class="buttonContact" onclick="contactUs()">Contact us!</button>
            </div>
            <p>&copy; 2023 Web Project. All Rights Reserved.</p>
        </footer>
	</div>
	<script>
		// Function to open a link when the buttons are pressed
		function contactUs() {
			window.open("aboutPage.html");
		}
	</script>
	<script>
		// Function to send AJAX request and register a new user
		function register(username, password, confirmPassword) {
			// Check if password and confirm password match
			if (password !== confirmPassword) {
				console.log("Mismatch between password and confirmed password");
				return;
			}

			// Create an object with the form data
			const formData = {
				username: username,
				password: password
			};

			fetch('/newAccount', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json'
				},
				body: JSON.stringify(formData)
			})
				.then(response => response.json())
				.then(data => {
					if (data.success) {
						alert('Registration successful');
						// Redirect to login page or any other desired location
					} else {
						alert(data.message);
					}
				})
				.catch(error => {
					console.error('Error:', error);
					alert('An error occurred during registration');
				});
		}

		// Function to handle form submission
		function handleSubmit(event) {
			event.preventDefault();

			// Get form input values
			const username = document.getElementById('username').value;
			const password = document.getElementById('password').value;
			const confirmPassword = document.getElementById('confirm-password').value;

			// Call the register function
			register(username, password, confirmPassword);
		}
	</script>
</body>
</html>
