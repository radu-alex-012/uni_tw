<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>DoW: viewing data from table 'Studenti fizica'</title>
    <link href="img/icons/favicon.svg" rel="shortcut icon" type="image/png">
    <link rel="stylesheet" href="styleSheets/style.css">

    
    <!-- added by teodor-->
	<link rel="stylesheet" type="text/css" href="styleSheets/cssTheme.css">

    <style>
        .homepage{
            margin-left: auto;
        }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="button-alignement">
            <!-- <button class="menu-button dropdown" onclick="databasePanelToggle()"><span class="text"><img src="img/icons/favicon.svg" style="width: 25px; height: 25px;" alt="database img"/> Databases</span></button> -->
        </div>

        <div class="navbar-buttons">
            <a href="homepage.html"><img src="img/icons/home.svg" alt="home"/></a>
            <a href="accountSettings.html"><img src="img/icons/account.svg" alt="account"/></a>
            <!-- added by teodor-->
            <!-- <button id="toggle-theme">Toggle Theme</button> -->
            <button id="toggle-theme"><img src="img/icons/theme-toggle.svg" alt="toggle-theme"/></button>
            <a href="index.html"><img src="img/icons/logout.svg" alt="logout"/></a>
        </div>
    </div>

<div class="homepage">
    <div class="main-container">

        <div id="listaTabele" style="width: 100%;"></div>
    </div>
</div>

<script>
var listaTabele = document.getElementById("listaTabele");
      fetch('/getTableInfo', {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json'
        }
      })
      .then(response => response.json())
      .then(data => {
        console.log(data);

        var tabel = document.createElement("div");
            tabel.classList.add("tabel");

            var tabelDescription = document.createElement("div");
            tabelDescription.classList.add("table-description");
            
            var h2 = document.createElement("h2");
            h2.textContent = data.name;
            
            tabelDescription.appendChild(h2);
            tabel.appendChild(tabelDescription);

            const firstRow = data.data.data[0]; // Get the first row from the data array
            const firstColName = Object.keys(firstRow)[0];

            data.data.data.forEach(ROW => {
                var row = document.createElement("div");
                row.classList.add("row");
                row.innerHTML = "<div class=\"field-name-min\"><form class=\"form-control\"><label><input class=\"row-check\" type=\"checkbox\" value=\"\"></label></form><button class=\"expand-button\" onclick=\"toggleRowData(event)\">+</button><div class=\"row-title\">ID</div></div>";

                var rowData = document.createElement("div");
                rowData.classList.add("row-data");

                let rowString = "";
                for (let key in ROW) {
                    if (ROW.hasOwnProperty(key)) {
                        const value = ROW[key];
                        rowString += `${key}: ${value}, `;

                        var col1 = document.createElement("div");//name
                        col1.classList.add("col");
                        col1.innerHTML = "<p><b>" + key + ":</b> <i>" + value +"</i></p>";

                        rowData.appendChild(col1);
                    }
                }
                console.log(rowString.slice(0, -2));


                row.appendChild(rowData);
                tabel.appendChild(row);
            });

            var form = document.createElement("form");
            form.id = "form";
            form.setAttribute('onsubmit', 'submitButtons(event); return false;');
            form.innerHTML = "<label><input class=\"row-check\" type=\"checkbox\" value=\"Check all\">Check all</label><div><input class=\"submit\" type=\"button\" onclick=\"\" value=\"Delete row(s)\"><input class=\"submit\" type=\"button\" onclick=\"location.href='insertValues.html'\" value=\"Insert values\"></div>";

            var tableCommands = document.createElement("div");
            tableCommands.id = "tabcomm";
            tableCommands.classList.add("table-commands");

            tableCommands.appendChild(form);

            tabel.appendChild(tableCommands);

            listaTabele.appendChild(tabel);

       
      })
      .catch(error => {
        console.error(error);
      });





</script>

<!-- <script src="../javascript/home.js"></script> -->
    <!-- added by teodor-->
	<script src="../javascript/jsDarkModeScript.js"></script>
</body>
</html>